CREATE TABLE posts (id INT NOT NULL, title TEXT NOT NULL, slug TEXT NOT NULL, body TEXT NOT NULL, date TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL, publish_date TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL, draft BOOLEAN NOT NULL, PRIMARY KEY(id));
CREATE TABLE posts_tags (post_id INT NOT NULL, tag_id INT NOT NULL, PRIMARY KEY(post_id, tag_id));
CREATE INDEX IDX_D5ECAD9F4B89032C ON posts_tags (post_id);
CREATE INDEX IDX_D5ECAD9FBAD26311 ON posts_tags (tag_id);
CREATE TABLE tags (id INT NOT NULL, name VARCHAR(50) NOT NULL, color VARCHAR(6) NOT NULL, PRIMARY KEY(id));
CREATE TABLE users (id INT NOT NULL, username VARCHAR(100) NOT NULL, password VARCHAR(100) NOT NULL, role VARCHAR(20) NOT NULL, PRIMARY KEY(id));
CREATE UNIQUE INDEX UNIQ_1483A5E9F85E0677 ON users (username);
CREATE TABLE pictures (id INT NOT NULL, uuid VARCHAR(40) NOT NULL, name VARCHAR(255) NOT NULL, created TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL, PRIMARY KEY(id));
CREATE TABLE pingbacks (id INT NOT NULL, PRIMARY KEY(id));
CREATE TABLE mirror_posts (id INT NOT NULL, title TEXT NOT NULL, body TEXT NOT NULL, date TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL, PRIMARY KEY(id));
CREATE TABLE settings (id INT NOT NULL, key VARCHAR(255) NOT NULL, value VARCHAR(255) NOT NULL, PRIMARY KEY(id));
CREATE SEQUENCE posts_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE tags_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE users_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE pictures_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE pingbacks_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE mirror_posts_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE settings_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
ALTER TABLE posts_tags ADD CONSTRAINT FK_D5ECAD9F4B89032C FOREIGN KEY (post_id) REFERENCES posts (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE posts_tags ADD CONSTRAINT FK_D5ECAD9FBAD26311 FOREIGN KEY (tag_id) REFERENCES tags (id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
